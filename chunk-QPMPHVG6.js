import{a as J,c as Q,g as Y,l as G,m as K,n as W,r as X}from"./chunk-DLTYQI5V.js";import{$ as V,A as y,Aa as L,Ba as R,C as o,Da as q,Ea as A,H as T,Ka as H,L as h,Na as U,P as c,Q as t,R as n,V as v,W as u,X as f,ba as I,ca as i,da as C,ea as x,ma as P,na as D,oa as M,pa as F,ra as N,t as g,ta as B,u as _,w as b,xa as z,ya as $,za as j}from"./chunk-QWBLN4CG.js";function ee(d,r){if(d&1){let e=v();t(0,"img",35),u("error",function(l){g(e);let s=f(3);return _(s.onImgError(l))}),n()}if(d&2){let e=r.$implicit;c("src",e.img||"assets/images/placeholder.png",y)("alt",e.nome)}}function te(d,r){if(d&1&&(t(0,"span",36),i(1),n()),d&2){let e=f().$implicit;o(),x("+",e.itens.length-4)}}function ne(d,r){if(d&1){let e=v();t(0,"article",24),u("click",function(){let l=g(e).$implicit,s=f(2);return _(s.abrirDetalhes(l))}),t(1,"header",25)(2,"div",26)(3,"h3"),i(4),n(),t(5,"span",27),i(6),P(7,"date"),n()(),t(8,"span"),i(9),P(10,"titlecase"),n()(),t(11,"div",28)(12,"div",29)(13,"strong"),i(14),n(),t(15,"small"),i(16),n()(),t(17,"div",30)(18,"span"),i(19),n(),t(20,"span",31),i(21),P(22,"number"),n()()(),t(23,"footer",32),h(24,ee,1,2,"img",33),P(25,"slice"),h(26,te,2,1,"span",34),n()()}if(d&2){let e=r.$implicit,a=f(2);o(4),x("#",e.numero),o(2),C(M(7,11,e.criadoEm,"dd/MM/yyyy HH:mm")),o(2),I(a.classeStatus(e.status)),o(),C(D(10,14,e.status)),o(5),C(e.clienteNome),o(2),C(e.clienteEmail),o(3),x("",a.totalItens(e)," itens"),o(2),x("Total: R$ ",M(22,16,e.total,"1.2-2")),o(3),c("ngForOf",F(25,19,e.itens,0,4)),o(2),c("ngIf",e.itens.length>4)}}function ie(d,r){if(d&1&&(t(0,"section",21)(1,"div",22),h(2,ne,27,23,"article",23),n()()),d&2){let e=f();o(2),c("ngForOf",e.filtrados())("ngForTrackBy",e.trackById)}}function oe(d,r){d&1&&(t(0,"div"),i(1,"Carregando pedidos..."),n())}function ae(d,r){d&1&&(t(0,"div"),i(1,"N\xE3o foi poss\xEDvel carregar os pedidos agora."),n())}function re(d,r){if(d&1&&(t(0,"div",37),h(1,oe,2,0,"div",38)(2,ae,2,0,"div",38),n()),d&2){let e=f();o(),c("ngIf",e.carregando),o(),c("ngIf",e.erro)}}function de(d,r){if(d&1){let e=v();t(0,"div",39),u("click",function(){g(e);let l=f();return _(l.fecharDetalhes())}),n()}}function le(d,r){if(d&1){let e=v();t(0,"div",48)(1,"img",35),u("error",function(l){g(e);let s=f(2);return _(s.onImgError(l))}),n(),t(2,"div",49)(3,"div",50),i(4),n(),t(5,"div",51),i(6),n()(),t(7,"div",52),i(8),P(9,"number"),n()()}if(d&2){let e=r.$implicit;o(),c("src",e.img||"assets/images/placeholder.png",y)("alt",e.nome),o(3),C(e.nome),o(2),x("Qtd: ",e.qtd),o(2),x("R$ ",M(9,5,e.preco*e.qtd,"1.2-2"))}}function se(d,r){if(d&1){let e=v();t(0,"aside",40)(1,"header")(2,"h3"),i(3),n(),t(4,"button",41),u("click",function(){g(e);let l=f();return _(l.fecharDetalhes())}),i(5,"\xD7"),n()(),t(6,"section",42)(7,"div",43)(8,"span"),i(9,"Status"),n(),t(10,"strong"),i(11),P(12,"titlecase"),n()(),t(13,"div",43)(14,"span"),i(15,"Cliente"),n(),t(16,"strong"),i(17),n()(),t(18,"div",43)(19,"span"),i(20,"E-mail"),n(),t(21,"strong"),i(22),n()(),t(23,"div",43)(24,"span"),i(25,"Data"),n(),t(26,"strong"),i(27),P(28,"date"),n()()(),t(29,"section",44)(30,"h4"),i(31,"Itens"),n(),h(32,le,10,8,"div",45),n(),t(33,"section",46)(34,"div",43)(35,"span"),i(36,"Subtotal"),n(),t(37,"strong"),i(38),P(39,"number"),n()(),t(40,"div",43)(41,"span"),i(42,"Frete"),n(),t(43,"strong"),i(44),P(45,"number"),n()(),t(46,"div",47)(47,"span"),i(48,"Total"),n(),t(49,"strong"),i(50),P(51,"number"),n()()()()}if(d&2){let e,a,l,s,p,w,O,S,E,k,m=f();o(3),x("Pedido #",(e=m.selecionado())==null?null:e.numero),o(7),I(m.classeStatus((a=m.selecionado())==null?null:a.status)),o(),C(D(12,11,(l=m.selecionado())==null?null:l.status)),o(6),C((s=m.selecionado())==null?null:s.clienteNome),o(5),C((p=m.selecionado())==null?null:p.clienteEmail),o(5),C(M(28,13,(w=m.selecionado())==null?null:w.criadoEm,"dd/MM/yyyy HH:mm")),o(5),c("ngForOf",(O=m.selecionado())==null?null:O.itens),o(6),x("R$ ",M(39,16,(S=m.selecionado())==null?null:S.subtotal,"1.2-2")),o(6),x("R$ ",M(45,19,(E=m.selecionado())==null?null:E.frete,"1.2-2")),o(6),x("R$ ",M(51,22,(k=m.selecionado())==null?null:k.total,"1.2-2"))}}var Z=class d{carregando=!1;erro=!1;lista=b([]);abertoDrawer=b(!1);selecionadoPedido=b(null);filtroTexto=b("");filtroStatus=b("todos");dataInicio=b(null);dataFim=b(null);filtrados=B(()=>{let r=(this.filtroTexto()||"").toLowerCase().trim(),e=this.filtroStatus(),a=this.dataInicio()?new Date(this.dataInicio()):null,l=this.dataFim()?new Date(this.dataFim()):null;return this.lista().filter(s=>{let p=!r||s.numero.toLowerCase().includes(r)||s.clienteNome.toLowerCase().includes(r)||s.clienteEmail.toLowerCase().includes(r),w=e==="todos"||s.status===e,O=new Date(s.criadoEm),S=!a||O>=a,E=!l||O<=l;return p&&w&&S&&E})});ngOnInit(){this.carregando=!0,this.erro=!1;try{let r=localStorage.getItem("user"),e=r?JSON.parse(r)?.email:void 0,a=localStorage.getItem("pedidos"),l=a?JSON.parse(a):[],s=e?l.filter(p=>p.clienteEmail===e):l;this.lista.set(Array.isArray(s)?s:[]),this.carregando=!1}catch{this.erro=!0,this.carregando=!1}}resetFiltros(){this.filtroTexto.set(""),this.filtroStatus.set("todos"),this.dataInicio.set(null),this.dataFim.set(null)}abrirDetalhes(r){this.selecionadoPedido.set(r),this.abertoDrawer.set(!0)}fecharDetalhes(){this.abertoDrawer.set(!1),this.selecionadoPedido.set(null)}aberto(){return this.abertoDrawer()}selecionado(){return this.selecionadoPedido()}totalItens(r){return(r.itens||[]).reduce((e,a)=>e+Number(a.qtd||0),0)}onImgError(r){let e=r.target;e.src="assets/images/placeholder.png"}classeStatus(r){switch(r){case"pendente":return"status status-pendente";case"processando":return"status status-processando";case"enviado":return"status status-enviado";case"concluido":return"status status-concluido";case"cancelado":return"status status-cancelado";default:return"status"}}trackById(r,e){return e.id}static \u0275fac=function(e){return new(e||d)};static \u0275cmp=T({type:d,selectors:[["app-pedido"]],decls:39,vars:8,consts:[["estado",""],[1,"hero-mini"],[1,"container","hero-head"],["routerLink","/",1,"btn","btn-outline-primary"],[1,"filtros","container"],[1,"row"],[1,"col"],["type","text","placeholder","Buscar por n\xBA do pedido, nome ou e-mail",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","todos"],["value","pendente"],["value","processando"],["value","enviado"],["value","concluido"],["value","cancelado"],["type","date",3,"ngModelChange","ngModel"],[1,"col-auto"],[1,"btn","btn-outline-primary",3,"click"],["class","lista container",4,"ngIf","ngIfElse"],["class","drawer-backdrop",3,"click",4,"ngIf"],["class","drawer",4,"ngIf"],[1,"lista","container"],[1,"grid"],["class","pedido",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"pedido",3,"click"],[1,"pedido-top"],[1,"lado-esq"],[1,"data"],[1,"pedido-body"],[1,"cliente"],[1,"resumo"],[1,"total"],[1,"pedido-media"],[3,"src","alt","error",4,"ngFor","ngForOf"],["class","mais",4,"ngIf"],[3,"error","src","alt"],[1,"mais"],[1,"container","estado"],[4,"ngIf"],[1,"drawer-backdrop",3,"click"],[1,"drawer"],["aria-label","Fechar",1,"btn-fechar",3,"click"],[1,"bloco"],[1,"linha"],[1,"itens"],["class","item",4,"ngFor","ngForOf"],[1,"totais"],[1,"linha","total"],[1,"item"],[1,"info"],[1,"nome"],[1,"meta"],[1,"preco"]],template:function(e,a){if(e&1){let l=v();t(0,"section",1)(1,"div",2)(2,"div")(3,"h1"),i(4,"Meus Pedidos"),n(),t(5,"p"),i(6,"Acompanhe o status dos seus pedidos e veja os detalhes de cada compra."),n()(),t(7,"a",3),i(8,"Voltar ao menu"),n()()(),t(9,"section",4)(10,"div",5)(11,"div",6)(12,"input",7),u("ngModelChange",function(p){return g(l),_(a.filtroTexto.set(p))}),n()(),t(13,"div",6)(14,"select",8),u("ngModelChange",function(p){return g(l),_(a.filtroStatus.set(p))}),t(15,"option",9),i(16,"Todos os status"),n(),t(17,"option",10),i(18,"Pendente"),n(),t(19,"option",11),i(20,"Processando"),n(),t(21,"option",12),i(22,"Enviado"),n(),t(23,"option",13),i(24,"Conclu\xEDdo"),n(),t(25,"option",14),i(26,"Cancelado"),n()()(),t(27,"div",6)(28,"input",15),u("ngModelChange",function(p){return g(l),_(a.dataInicio.set(p))}),n()(),t(29,"div",6)(30,"input",15),u("ngModelChange",function(p){return g(l),_(a.dataFim.set(p))}),n()(),t(31,"div",16)(32,"button",17),u("click",function(){return g(l),_(a.resetFiltros())}),i(33,"Limpar"),n()()()(),h(34,ie,3,2,"section",18)(35,re,3,2,"ng-template",null,0,N)(37,de,1,0,"div",19)(38,se,52,25,"aside",20)}if(e&2){let l=V(36);o(12),c("ngModel",a.filtroTexto()),o(2),c("ngModel",a.filtroStatus()),o(14),c("ngModel",a.dataInicio()),o(2),c("ngModel",a.dataFim()),o(4),c("ngIf",!a.carregando&&!a.erro)("ngIfElse",l),o(3),c("ngIf",a.aberto()),o(),c("ngIf",a.aberto())}},dependencies:[A,z,$,X,K,W,J,G,Q,Y,U,H,q,R,j,L],styles:[".container[_ngcontent-%COMP%]{max-width:1100px;margin:0 auto;padding:0 16px}.hero-mini[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff914d,#ff5e62);color:#fff;padding:28px 0;text-align:left}.hero-head[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px}.filtros[_ngcontent-%COMP%]{margin-top:18px;margin-bottom:12px}.filtros[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.2fr .8fr .6fr .6fr auto;gap:12px;align-items:center}.filtros[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .filtros[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .filtros[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:42px;border-radius:10px;border:1px solid #e5e7eb;padding:0 12px;outline:none}.lista[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;margin-bottom:24px}.pedido[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:14px;padding:14px;box-shadow:0 8px 20px #0000000f;cursor:pointer;transition:transform .2s ease,box-shadow .2s ease}.pedido[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 12px 26px #00000014}.pedido-top[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}.pedido-top[_ngcontent-%COMP%]   .lado-esq[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:baseline}.pedido-top[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;margin:0}.pedido-top[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.chip[_ngcontent-%COMP%]{padding:6px 10px;border-radius:999px;font-size:12px;font-weight:700;color:#fff}.chip-pendente[_ngcontent-%COMP%]{background:linear-gradient(45deg,#f59e0b,#f97316)}.chip-processando[_ngcontent-%COMP%]{background:linear-gradient(45deg,#3b82f6,#2563eb)}.chip-enviado[_ngcontent-%COMP%]{background:linear-gradient(45deg,#06b6d4,#0891b2)}.chip-concluido[_ngcontent-%COMP%]{background:linear-gradient(45deg,#22c55e,#16a34a)}.chip-cancelado[_ngcontent-%COMP%]{background:linear-gradient(45deg,#ef4444,#dc2626)}.pedido-body[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;gap:10px;align-items:center;margin-top:4px}.pedido-body[_ngcontent-%COMP%]   .cliente[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block}.pedido-body[_ngcontent-%COMP%]   .cliente[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6b7280}.pedido-body[_ngcontent-%COMP%]   .resumo[_ngcontent-%COMP%]{text-align:right}.pedido-body[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{font-weight:700;color:#111827}.pedido-media[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin-top:12px}.pedido-media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:8px;object-fit:cover;border:1px solid #e5e7eb}.pedido-media[_ngcontent-%COMP%]   .mais[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.estado[_ngcontent-%COMP%]{padding:24px 0}.drawer-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0006;z-index:1040}.drawer[_ngcontent-%COMP%]{position:fixed;right:0;top:0;width:min(420px,100%);height:100%;background:#fff;border-left:1px solid #e5e7eb;box-shadow:-10px 0 30px #0000001f;padding:16px;z-index:1045;display:flex;flex-direction:column}.drawer[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}.drawer[_ngcontent-%COMP%]   .btn-fechar[_ngcontent-%COMP%]{border:none;background:transparent;font-size:22px;cursor:pointer}.drawer[_ngcontent-%COMP%]   .bloco[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;margin-bottom:12px}.drawer[_ngcontent-%COMP%]   .bloco[_ngcontent-%COMP%]   .linha[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:6px 0}.drawer[_ngcontent-%COMP%]   .itens[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:8px 0 10px}.drawer[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:grid;grid-template-columns:48px 1fr auto;gap:10px;align-items:center;padding:8px 0;border-bottom:1px dashed #e5e7eb}.drawer[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:last-child{border-bottom:none}.drawer[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:8px;object-fit:cover;border:1px solid #e5e7eb}.drawer[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .nome[_ngcontent-%COMP%]{font-weight:600}.drawer[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.drawer[_ngcontent-%COMP%]   .totais[_ngcontent-%COMP%]{margin-top:auto;border-top:1px solid #e5e7eb;padding-top:12px}.drawer[_ngcontent-%COMP%]   .totais[_ngcontent-%COMP%]   .linha[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:6px 0}.drawer[_ngcontent-%COMP%]   .totais[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:18px}.hero-mini[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .hero-mini[_ngcontent-%COMP%]   a.btn[_ngcontent-%COMP%], .hero-mini[_ngcontent-%COMP%]   .btn.btn-outline-primary[_ngcontent-%COMP%]{color:#fff!important;border-color:#fff!important;background:transparent!important;transition:all .2s ease}.hero-mini[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover, .hero-mini[_ngcontent-%COMP%]   a.btn[_ngcontent-%COMP%]:hover{background:#fff!important;color:#ff5e62!important;border-color:#fff!important}.hero-mini[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus, .hero-mini[_ngcontent-%COMP%]   a.btn[_ngcontent-%COMP%]:focus{outline:2px solid #fff;outline-offset:2px}"]})};export{Z as Pedido};
