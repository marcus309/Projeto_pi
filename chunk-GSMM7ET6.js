import{a as A}from"./chunk-SHUQ4BQF.js";import{a as V,b as g,c as T,d as N,f as E,h as j,i as q,j as z,k as D,o as G,p as L,q as U,r as R,s as B}from"./chunk-DLTYQI5V.js";import{A as C,C as d,Ca as I,Ea as F,G as P,H as w,Ka as O,L as s,P as a,Q as i,R as t,S as v,V as b,W as u,X as c,aa as h,ca as o,da as x,ma as S,qa as y,t as f,u as _,xa as M,ya as k}from"./chunk-QWBLN4CG.js";function H(r,n){if(r&1){let e=b();i(0,"tr")(1,"td"),o(2),t(),i(3,"td")(4,"img",20),u("error",function(m){f(e);let p=c();return _(p.onImgError(m))}),t()(),i(5,"td"),o(6),t(),i(7,"td"),o(8),S(9,"currency"),t(),i(10,"td")(11,"button",21),u("click",function(){let m=f(e).$implicit,p=c();return _(p.editarProduto(m.id))}),o(12,"Editar"),t(),i(13,"button",22),u("click",function(){let m=f(e).$implicit,p=c();return _(p.excluirProduto(m.id))}),o(14,"Excluir"),t()()()}if(r&2){let e=n.$implicit;d(2),x(e.id),d(2),a("src",e.img,C)("alt",e.nome),d(2),x(e.nome),d(2),x(y(9,5,e.preco,"BRL","symbol","1.2-2"))}}function Y(r,n){r&1&&(i(0,"tr")(1,"td",23),o(2,"Nenhum produto cadastrado."),t()())}function J(r,n){r&1&&(i(0,"div"),o(1,"Nome \xE9 obrigat\xF3rio."),t())}function K(r,n){r&1&&(i(0,"div"),o(1,"M\xEDnimo de 3 caracteres."),t())}function Q(r,n){if(r&1&&(i(0,"div",43),s(1,J,2,0,"div",17)(2,K,2,0,"div",17),t()),r&2){let e=c(3);d(),a("ngIf",e.nome.errors.required),d(),a("ngIf",e.nome.errors.minlength)}}function W(r,n){r&1&&(i(0,"div"),o(1,"Pre\xE7o \xE9 obrigat\xF3rio."),t())}function X(r,n){r&1&&(i(0,"div"),o(1,"O valor deve ser maior ou igual a 0."),t())}function Z(r,n){if(r&1&&(i(0,"div",43),s(1,W,2,0,"div",17)(2,X,2,0,"div",17),t()),r&2){let e=c(3);d(),a("ngIf",e.preco.errors.required),d(),a("ngIf",e.preco.errors.min)}}function ee(r,n){r&1&&(i(0,"div"),o(1,"URL da imagem \xE9 obrigat\xF3ria."),t())}function te(r,n){r&1&&(i(0,"div"),o(1,"Caminho inv\xE1lido. Verifique a extens\xE3o e o prefixo."),t())}function ie(r,n){if(r&1&&(i(0,"div",43),s(1,ee,2,0,"div",17)(2,te,2,0,"div",17),t()),r&2){let e=c(3);d(),a("ngIf",e.img.errors.required),d(),a("ngIf",e.img.errors.pattern)}}function re(r,n){if(r&1){let e=b();i(0,"div",44)(1,"img",45),u("error",function(m){f(e);let p=c(3);return _(p.onImgError(m))}),t()()}if(r&2){let e=c(3);d(),a("src",e.img.value,C)}}function ne(r,n){if(r&1){let e=b();i(0,"form",27),u("ngSubmit",function(m){f(e);let p=c(2);return _(p.salvarProduto(m))}),i(1,"div",28)(2,"h5",29),o(3),t(),i(4,"button",30),u("click",function(){f(e);let m=c(2);return _(m.fecharModal())}),t()(),i(5,"div",31)(6,"div",32)(7,"label",33),o(8,"Nome"),t(),v(9,"input",34),s(10,Q,3,2,"div",35),t(),i(11,"div",32)(12,"label",33),o(13,"Pre\xE7o"),t(),v(14,"input",36),s(15,Z,3,2,"div",35),t(),i(16,"div",32)(17,"label",33),o(18,"URL da Imagem"),t(),v(19,"input",37),i(20,"small",38),o(21,"Use assets/... ou http(s):// e extens\xE3o png/jpg/jpeg/webp/gif"),t(),s(22,ie,3,2,"div",35)(23,re,2,1,"div",39),t()(),i(24,"div",40)(25,"button",41),u("click",function(){f(e);let m=c(2);return _(m.fecharModal())}),o(26,"Cancelar"),t(),i(27,"button",42),o(28,"Salvar"),t()()()}if(r&2){let e=c(2);a("formGroup",e.produtoForm),d(3),x(e.formId?"Editar Produto":"Adicionar Produto"),d(6),h("is-invalid",e.nome.invalid&&(e.nome.dirty||e.nome.touched)),d(),a("ngIf",e.nome.errors&&(e.nome.dirty||e.nome.touched)),d(4),h("is-invalid",e.preco.invalid&&(e.preco.dirty||e.preco.touched)),d(),a("ngIf",e.preco.errors&&(e.preco.dirty||e.preco.touched)),d(4),h("is-invalid",e.img.invalid&&(e.img.dirty||e.img.touched)),d(3),a("ngIf",e.img.errors&&(e.img.dirty||e.img.touched)),d(),a("ngIf",e.img.value),d(4),a("disabled",e.produtoForm.invalid)}}function oe(r,n){if(r&1&&(i(0,"div",24)(1,"div",25),s(2,ne,29,13,"form",26),t()()),r&2){let e=c();d(2),a("ngIf",e.produtoForm)}}function de(r,n){r&1&&v(0,"div",46)}var $=class r{constructor(n,e){this.fb=n;this.produtoService=e}produtos=[];showModal=!1;produtoForm;formId=null;ngOnInit(){this.criarFormulario(),this.loadProdutos()}criarFormulario(){let n=/^(images\/.+|assets\/images\/.+|https?:\/\/.+)\.(png|jpg|jpeg|webp|gif)$/i;this.produtoForm=this.fb.group({nome:new E("",[g.required,g.minLength(3)]),preco:new E(null,[g.required,g.min(0)]),img:new E("",[g.required,g.pattern(n)])})}get nome(){return this.produtoForm.get("nome")}get preco(){return this.produtoForm.get("preco")}get img(){return this.produtoForm.get("img")}loadProdutos(){this.produtoService.listar().subscribe({next:n=>{this.produtos=n},error:n=>{console.error("Erro ao carregar /products:",n)}})}abrirNovo(){this.formId=null,this.produtoForm.reset(),this.showModal=!0,this.produtoForm.markAsPristine(),this.produtoForm.markAsUntouched()}editarProduto(n){let e=this.produtos.find(l=>l.id===n);e&&(this.formId=e.id,this.produtoForm.setValue({nome:e.nome,preco:e.preco,img:e.img}),this.showModal=!0,this.produtoForm.markAsPristine(),this.produtoForm.markAsUntouched())}excluirProduto(n){confirm("Excluir este produto?")&&this.produtoService.excluir(n).subscribe({next:()=>this.produtos=this.produtos.filter(e=>e.id!==n),error:()=>{console.error("Erro ao excluir.")}})}fecharModal(){this.showModal=!1}salvarProduto(n){if(n.preventDefault(),this.produtoForm.markAllAsTouched(),this.produtoForm.invalid)return;let e={nome:(this.nome.value||"").trim(),preco:Number(this.preco.value??0),img:(this.img.value||"").trim()};this.formId==null?this.produtoService.incluir(e).subscribe({next:l=>{this.produtos=[...this.produtos,l],this.fecharModal()},error:()=>{console.error("Erro ao criar produto.")}}):this.produtoService.editar(this.formId,e).subscribe({next:l=>{this.produtos=this.produtos.map(m=>m.id===this.formId?l:m),this.fecharModal()},error:()=>{console.error("Erro ao atualizar produto.")}})}onImgError(n){let e=n.target;e&&(e.src="images/badboy.png")}static \u0275fac=function(e){return new(e||r)(P(U),P(A))};static \u0275cmp=w({type:r,selectors:[["app-admin"]],decls:42,vars:4,consts:[[1,"d-flex","admin-root"],[1,"sidebar","bg-dark","text-white","p-3"],[1,"text-center","mb-4"],[1,"nav","flex-column"],[1,"nav-item"],["href","#",1,"nav-link","active"],["aria-disabled","true",1,"nav-link","text-white-50"],["routerLink","/",1,"nav-link","text-white-50"],[1,"flex-grow-1","p-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"fw-bold"],[1,"btn","btn-primary",3,"click"],[1,"table-responsive"],[1,"table","table-striped","align-middle"],[1,"table-dark"],[2,"width","180px"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","modal d-block","tabindex","-1","aria-modal","true","role","dialog","style","z-index:1055;",4,"ngIf"],["class","modal-backdrop fade show","style","z-index:1050;",4,"ngIf"],[2,"width","60px","height","60px","object-fit","cover","border-radius","8px",3,"error","src","alt"],[1,"btn","btn-sm","btn-warning","me-2",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],["colspan","5",1,"text-center","text-muted"],["tabindex","-1","aria-modal","true","role","dialog",1,"modal","d-block",2,"z-index","1055"],[1,"modal-dialog"],["class","modal-content","novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],["novalidate","",1,"modal-content",3,"ngSubmit","formGroup"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Fechar",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],[1,"form-label"],["type","text","formControlName","nome","placeholder","Ex: Versace Eros",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["type","number","formControlName","preco","required","","step","0.01","min","0","placeholder","Ex: 399.90",1,"form-control"],["type","text","formControlName","img","placeholder","assets/images/eros.png | https://.../foto.jpg",1,"form-control"],[1,"text-muted"],["class","mt-2",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"invalid-feedback"],[1,"mt-2"],["alt","Pr\xE9via",2,"width","80px","height","80px","object-fit","cover","border","1px solid #eee","border-radius","8px",3,"error","src"],[1,"modal-backdrop","fade","show",2,"z-index","1050"]],template:function(e,l){e&1&&(i(0,"div",0)(1,"aside",1)(2,"h4",2),o(3,"Pura Ess\xEAncia"),t(),i(4,"ul",3)(5,"li",4)(6,"a",5),o(7,"Produtos"),t()(),i(8,"li",4)(9,"a",6),o(10,"Pedidos"),t()(),i(11,"li",4)(12,"a",6),o(13,"Clientes"),t()(),i(14,"li",4)(15,"a",7),o(16,"Voltar \xE0 loja"),t()()()(),i(17,"main",8)(18,"div",9)(19,"h3",10),o(20,"Gerenciar Produtos"),t(),i(21,"button",11),u("click",function(){return l.abrirNovo()}),o(22,"+ Novo Produto"),t()(),i(23,"div",12)(24,"table",13)(25,"thead",14)(26,"tr")(27,"th"),o(28,"ID"),t(),i(29,"th"),o(30,"Imagem"),t(),i(31,"th"),o(32,"Nome"),t(),i(33,"th"),o(34,"Pre\xE7o"),t(),i(35,"th",15),o(36,"A\xE7\xF5es"),t()()(),i(37,"tbody"),s(38,H,15,10,"tr",16)(39,Y,3,0,"tr",17),t()()()()(),s(40,oe,3,1,"div",18)(41,de,1,0,"div",19)),e&2&&(d(38),a("ngForOf",l.produtos),d(),a("ngIf",l.produtos.length===0),d(),a("ngIf",l.showModal),d(),a("ngIf",l.showModal))},dependencies:[F,M,k,R,j,V,q,T,N,L,G,B,z,D,O,I],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}.admin-root[_ngcontent-%COMP%]{min-height:100vh;background-color:#fff}.sidebar[_ngcontent-%COMP%]{width:250px;background:linear-gradient(135deg,#ff914d,#ff5e62);color:#fff;min-height:100vh;box-shadow:4px 0 15px #0000001a;padding:25px 20px}.sidebar[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700;text-align:center;margin-bottom:40px;letter-spacing:1px}.sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#ffffffd9;font-weight:500;margin-bottom:10px;border-radius:10px;transition:all .3s ease;padding:10px 15px}.sidebar[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{background:#ffffff26;color:#fff;transform:translate(3px)}main[_ngcontent-%COMP%]{flex-grow:1;padding:40px;background-color:#fff9f6}h3[_ngcontent-%COMP%]{color:#333;font-weight:700}.btn[_ngcontent-%COMP%]{border-radius:50px;font-weight:600;transition:all .3s ease;border:none}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(45deg,#ff914d,#ff5e62);color:#fff}.btn-warning[_ngcontent-%COMP%]{background:#ffd166;color:#333;border:none}.btn-danger[_ngcontent-%COMP%]{background:#ef476f;color:#fff;border:none}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #ff5e624d}.table[_ngcontent-%COMP%]{background-color:#fff;border-radius:15px;overflow:hidden;box-shadow:0 5px 20px #0000000d}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(45deg,#ff914d,#ff5e62);color:#fff}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}.table[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:55px;height:55px;object-fit:cover;border-radius:10px}.modal-content[_ngcontent-%COMP%]{border-radius:20px;box-shadow:0 5px 20px #00000026}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(45deg,#ff914d,#ff5e62);color:#fff;border-top-left-radius:20px;border-top-right-radius:20px}.modal-footer[_ngcontent-%COMP%]{border-top:none}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(45deg,#ff914d,#ff5e62);border-radius:10px}"]})};export{$ as Admin};
