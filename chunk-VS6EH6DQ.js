import{a as L}from"./chunk-BSIPSJGH.js";import{a as N,c as q,d as V,e as I,g as z,h as T,p as F,r as W}from"./chunk-DLTYQI5V.js";import{C as s,Ea as S,G as f,H as v,Ja as k,Ka as E,L as _,P as m,Q as t,R as n,S as M,V as C,W as u,X as P,ca as o,da as w,ea as O,ha as x,ia as h,ja as b,t as g,u as p,ya as y}from"./chunk-QWBLN4CG.js";function A(d,l){if(d&1&&(t(0,"div",23),o(1),n()),d&2){let a=P();s(),w(a.errorMsg)}}var Y=class d{constructor(l,a){this.router=l;this.usuarioService=a}email="";senha="";errorMsg=null;loading=!1;login(){this.errorMsg=null;let l=this.email.trim().toLowerCase(),a=this.senha.trim();if(!l||!a){this.errorMsg="Preencha e-mail e senha.";return}this.loading=!0,this.usuarioService.buscarPorEmail(l).subscribe({next:e=>{if(this.loading=!1,!e){this.errorMsg="Email ou senha incorretos!";return}if(e.senha!==a){this.errorMsg="Email ou senha incorretos!";return}if(localStorage.setItem("user",JSON.stringify({email:e.email,tipo:e.tipo,nome:e.nome})),e.tipo==="adm"){alert("Bem-vindo, administrador!"),this.router.navigate(["/admin"]).catch(i=>{console.error("Falha ao navegar para /admin:",i),this.errorMsg="N\xE3o foi poss\xEDvel abrir a \xE1rea administrativa. Tente novamente."});return}alert("Bem-vindo, cliente!"),this.router.navigate(["/"]).catch(i=>{console.error("Falha ao navegar para /:",i),this.errorMsg="N\xE3o foi poss\xEDvel abrir a p\xE1gina inicial. Tente novamente."})},error:e=>{console.error("Erro ao consultar /users:",e),this.loading=!1,this.errorMsg="Falha na autentica\xE7\xE3o. Verifique sua conex\xE3o e tente novamente."}})}static \u0275fac=function(a){return new(a||d)(f(k),f(L))};static \u0275cmp=v({type:d,selectors:[["app-login"]],decls:35,vars:5,consts:[["f","ngForm"],[1,"navbar"],[1,"nav-left"],["src","images/logo.png","alt","Logo Pura Ess\xEAncia",1,"nav-logo"],[1,"brand"],[1,"nav-right"],["routerLink","/",1,"nav-btn"],["routerLink","/contato",1,"nav-btn"],[1,"page"],[1,"content-wrapper"],[1,"quadrado"],[1,"quadrado2"],["class","error-box","role","alert",4,"ngIf"],["novalidate","",1,"form-stack",3,"ngSubmit"],["for","email"],["type","email","id","email","name","email","placeholder","seu@email","autocomplete","email","required","","autofocus","",3,"ngModelChange","ngModel"],["for","senha"],["type","password","id","senha","name","senha","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","autocomplete","current-password","required","",3,"ngModelChange","keyup.enter","ngModel"],["type","submit",3,"disabled"],[2,"margin-top","10px","text-align","center"],["routerLink","/esqueci-senha"],[1,"cadastro-link",2,"margin-top","10px","text-align","center"],["routerLink","/cadastro"],["role","alert",1,"error-box"]],template:function(a,e){if(a&1){let i=C();t(0,"nav",1)(1,"div",2),M(2,"img",3),t(3,"span",4),o(4,"Pura Ess\xEAncia"),n()(),t(5,"div",5)(6,"a",6),o(7,"Menu"),n(),t(8,"a",7),o(9,"Contato"),n()()(),t(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h1"),o(15,"Pura Ess\xEAncia"),n(),_(16,A,2,1,"div",12),t(17,"form",13,0),u("ngSubmit",function(){return g(i),p(e.login())}),t(19,"label",14),o(20,"Email"),n(),t(21,"input",15),b("ngModelChange",function(r){return g(i),h(e.email,r)||(e.email=r),p(r)}),n(),t(22,"label",16),o(23,"Senha"),n(),t(24,"input",17),b("ngModelChange",function(r){return g(i),h(e.senha,r)||(e.senha=r),p(r)}),u("keyup.enter",function(){return g(i),p(e.login())}),n(),t(25,"button",18),o(26),n()(),t(27,"p",19)(28,"a",20),o(29,"Esqueci minha senha"),n()(),t(30,"div",21)(31,"p"),o(32,"N\xE3o possui conta? "),t(33,"a",22),o(34,"Cadastre-se aqui"),n()()()()()()()}a&2&&(s(16),m("ngIf",e.errorMsg),s(5),x("ngModel",e.email),s(3),x("ngModel",e.senha),s(),m("disabled",e.loading),s(),O(" ",e.loading?"Entrando...":"Entrar"," "))},dependencies:[S,y,E,W,T,N,q,V,F,z,I],styles:['[_nghost-%COMP%]{--nav-h: 72px;--offset-x: 40px;--offset-y: -20px;display:block;min-height:100svh;font-family:Arial,Helvetica,sans-serif;background:linear-gradient(135deg,#ffecd2,#fcb69f)}.page[_ngcontent-%COMP%]{padding-top:var(--nav-h);min-height:calc(100svh - var(--nav-h));display:grid;place-items:center}.content-wrapper[_ngcontent-%COMP%]{transform:translate(var(--offset-x),var(--offset-y));will-change:transform}.logo[_ngcontent-%COMP%]{width:160px;margin:0 0 25px;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-8px)}}.quadrado[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);background:#ffffffe0;padding:32px;border-radius:18px;box-shadow:0 8px 25px #0000002e;width:100%;max-width:360px;text-align:center;border:1px solid rgba(255,255,255,.35);animation:_ngcontent-%COMP%_fadeIn .8s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(14px)}to{opacity:1;transform:translateY(0)}}.quadrado[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:18px;font-size:24px;color:#333;font-weight:700;letter-spacing:.5px}.form-stack[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}label[_ngcontent-%COMP%]{text-align:left;font-size:14px;color:#444;font-weight:600}input[_ngcontent-%COMP%]{padding:12px 40px 12px 12px;border:1px solid #dcdcdc;border-radius:10px;outline:none;font-size:14px;transition:.25s ease;background:#f9f9f9}input[type=email][_ngcontent-%COMP%]{background:#f9f9f9 url(https://cdn-icons-png.flaticon.com/512/1828/1828479.png) no-repeat 96% center;background-size:18px}input[type=password][_ngcontent-%COMP%]{background:#f9f9f9 url(https://cdn-icons-png.flaticon.com/512/3064/3064197.png) no-repeat 96% center;background-size:18px}input[_ngcontent-%COMP%]:hover{border-color:#ffb08a}input[_ngcontent-%COMP%]:focus{border-color:#ff914d;box-shadow:0 0 0 4px #ff914d2e;background-color:#fff}button[_ngcontent-%COMP%]{padding:14px;border:none;border-radius:10px;background:linear-gradient(45deg,#ff914d,#ff5e62);color:#fff;font-weight:700;font-size:16px;cursor:pointer;transition:transform .15s ease,box-shadow .2s ease,filter .2s ease;position:relative;overflow:hidden}button[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,.25),transparent);transform:translate(-100%);transition:transform .6s ease}button[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 6px 16px #ff5e6247;filter:saturate(1.05)}button[_ngcontent-%COMP%]:hover:after{transform:translate(100%)}button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 3px 10px #ff5e6233}.quadrado2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ff5e62;font-weight:700;text-decoration:none;transition:color .2s ease,text-shadow .2s ease}.quadrado2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ff914d;text-decoration:underline;text-shadow:0 0 8px rgba(255,145,77,.25)}.navbar[_ngcontent-%COMP%]{width:100%;padding:12px 30px;background:#fff;display:flex;align-items:center;box-shadow:0 2px 6px #0000001a;position:fixed;top:0;left:0;z-index:1000}.nav-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.nav-logo[_ngcontent-%COMP%]{width:40px;height:auto}.brand[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:#5a3d2b}.nav-right[_ngcontent-%COMP%]{display:flex;gap:15px;margin-left:40px}.nav-btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:8px;text-decoration:none;font-weight:700;color:#fff;background:linear-gradient(90deg,#ff9a76,#ff6a3d);transition:.2s ease}.nav-btn[_ngcontent-%COMP%]:hover{opacity:.9}@media (max-width: 480px){[_nghost-%COMP%]{--nav-h: 64px;--offset-x: 0px;--offset-y: 0px}.logo[_ngcontent-%COMP%]{width:140px}.quadrado[_ngcontent-%COMP%]{padding:24px;border-radius:14px}}']})};export{Y as Login};
