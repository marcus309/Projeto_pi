import{a as S}from"./chunk-BSIPSJGH.js";import{a as y,b as m,c as E,d as w,f as g,h as I,j as k,k as F,q as T,s as N}from"./chunk-DLTYQI5V.js";import{C as r,Ea as b,G as u,H as v,Ja as P,Ka as O,L as l,P as d,Q as n,R as o,S as c,W as _,X as p,aa as f,ca as a,da as C,ea as x,ya as M}from"./chunk-QWBLN4CG.js";function z(t,s){if(t&1&&(n(0,"div",24),a(1),o()),t&2){let i=p();r(),C(i.errorMsg)}}function A(t,s){t&1&&(n(0,"div"),a(1,"Nome \xE9 obrigat\xF3rio."),o())}function L(t,s){t&1&&(n(0,"div"),a(1,"M\xEDnimo de 3 caracteres."),o())}function V(t,s){if(t&1&&(n(0,"div",25),l(1,A,2,0,"div",26)(2,L,2,0,"div",26),o()),t&2){let i=p();r(),d("ngIf",i.nome.hasError("required")),r(),d("ngIf",i.nome.hasError("minlength"))}}function D(t,s){t&1&&(n(0,"div"),a(1,"E-mail \xE9 obrigat\xF3rio."),o())}function G(t,s){t&1&&(n(0,"div"),a(1,"Informe um e-mail v\xE1lido."),o())}function R(t,s){if(t&1&&(n(0,"div",25),l(1,D,2,0,"div",26)(2,G,2,0,"div",26),o()),t&2){let i=p();r(),d("ngIf",i.email.hasError("required")),r(),d("ngIf",i.email.hasError("email"))}}function j(t,s){t&1&&(n(0,"div"),a(1,"Senha \xE9 obrigat\xF3ria."),o())}function B(t,s){t&1&&(n(0,"div"),a(1,"M\xEDnimo de 6 caracteres."),o())}function U(t,s){if(t&1&&(n(0,"div",25),l(1,j,2,0,"div",26)(2,B,2,0,"div",26),o()),t&2){let i=p();r(),d("ngIf",i.senha.hasError("required")),r(),d("ngIf",i.senha.hasError("minlength"))}}function J(t,s){t&1&&(n(0,"div"),a(1,"Confirma\xE7\xE3o de senha \xE9 obrigat\xF3ria."),o())}function Y(t,s){t&1&&(n(0,"div"),a(1,"As senhas n\xE3o coincidem."),o())}function H(t,s){if(t&1&&(n(0,"div",25),l(1,J,2,0,"div",26)(2,Y,2,0,"div",26),o()),t&2){let i=p();r(),d("ngIf",i.confirmarSenha.hasError("required")),r(),d("ngIf",i.formulario.hasError("passwordsMismatch"))}}var q=class t{constructor(s,i,e){this.fb=s;this.usuarioService=i;this.router=e;this.formulario=this.fb.group({nome:new g("",[m.required,m.minLength(3)]),email:new g("",[m.required,m.email]),senha:new g("",[m.required,m.minLength(6)]),confirmarSenha:new g("",[m.required])},{validators:this.passwordsMatchValidator})}formulario;errorMsg=null;loading=!1;get nome(){return this.formulario.get("nome")}get email(){return this.formulario.get("email")}get senha(){return this.formulario.get("senha")}get confirmarSenha(){return this.formulario.get("confirmarSenha")}passwordsMatchValidator(s){let i=s.get("senha")?.value??"",e=s.get("confirmarSenha")?.value??"";return!i||!e||i===e?null:{passwordsMismatch:!0}}onSubmit(){if(this.errorMsg=null,this.formulario.markAllAsTouched(),this.formulario.invalid)return;let{nome:s,email:i,senha:e}=this.formulario.value;this.loading=!0,this.usuarioService.buscarPorEmail(i.toLowerCase()).subscribe({next:h=>{if(h){this.loading=!1,this.errorMsg="J\xE1 existe um usu\xE1rio cadastrado com este e-mail.";return}this.usuarioService.cadastrar({nome:s,email:i,senha:e,tipo:"cliente"}).subscribe({next:K=>{this.loading=!1,alert("Cadastro realizado com sucesso!"),this.router.navigate(["/login"])},error:()=>{this.loading=!1,this.errorMsg="Falha ao cadastrar. Tente novamente."}})},error:()=>{this.loading=!1,this.errorMsg="N\xE3o foi poss\xEDvel validar o e-mail. Verifique sua conex\xE3o."}})}static \u0275fac=function(i){return new(i||t)(u(T),u(S),u(P))};static \u0275cmp=v({type:t,selectors:[["app-cadastro"]],decls:39,vars:16,consts:[[1,"navbar"],[1,"nav-left"],["src","images/logo.png","alt","Logo Pura Ess\xEAncia",1,"nav-logo"],[1,"brand"],[1,"nav-right"],["routerLink","/",1,"nav-btn"],["routerLink","/contato",1,"nav-btn"],[1,"page"],[1,"quadrado2"],["class","error-box","role","alert",4,"ngIf"],["novalidate","",3,"ngSubmit","formGroup"],["for","nome"],["id","nome","type","text","formControlName","nome","placeholder","Seu nome completo",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","email"],["id","email","type","email","formControlName","email","placeholder","seu@email",1,"form-control"],["for","senha"],["id","senha","type","password","formControlName","senha","placeholder","Crie uma senha","autocomplete","new-password",1,"form-control"],["for","confirmarSenha"],["id","confirmarSenha","type","password","formControlName","confirmarSenha","placeholder","Repita a senha","autocomplete","new-password",1,"form-control"],[1,"possui-login"],[1,"login"],["routerLink","/login",1,"text-primary"],["type","submit",3,"disabled"],["role","alert",1,"error-box"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(i,e){i&1&&(n(0,"nav",0)(1,"div",1),c(2,"img",2),n(3,"span",3),a(4,"Pura Ess\xEAncia"),o()(),n(5,"div",4)(6,"a",5),a(7,"Menu"),o(),n(8,"a",6),a(9,"Contato"),o()()(),n(10,"div",7)(11,"div",8)(12,"h1"),a(13,"Crie sua Conta"),o(),l(14,z,2,1,"div",9),n(15,"form",10),_("ngSubmit",function(){return e.onSubmit()}),n(16,"label",11),a(17,"Nome:"),o(),c(18,"input",12),l(19,V,3,2,"div",13),n(20,"label",14),a(21,"E-mail:"),o(),c(22,"input",15),l(23,R,3,2,"div",13),n(24,"label",16),a(25,"Senha:"),o(),c(26,"input",17),l(27,U,3,2,"div",13),n(28,"label",18),a(29,"Confirmar Senha:"),o(),c(30,"input",19),l(31,H,3,2,"div",13),n(32,"div",20)(33,"p",21),a(34," J\xE1 possui uma conta? "),n(35,"a",22),a(36,"Fa\xE7a login aqui"),o()()(),n(37,"button",23),a(38),o()()()()),i&2&&(r(14),d("ngIf",e.errorMsg),r(),d("formGroup",e.formulario),r(3),f("is-invalid",e.nome.invalid&&(e.nome.dirty||e.nome.touched)),r(),d("ngIf",e.nome.errors&&(e.nome.dirty||e.nome.touched)),r(3),f("is-invalid",e.email.invalid&&(e.email.dirty||e.email.touched)),r(),d("ngIf",e.email.errors&&(e.email.dirty||e.email.touched)),r(3),f("is-invalid",e.senha.invalid&&(e.senha.dirty||e.senha.touched)||e.formulario.hasError("passwordsMismatch")&&(e.confirmarSenha.dirty||e.confirmarSenha.touched)),r(),d("ngIf",e.senha.errors&&(e.senha.dirty||e.senha.touched)),r(3),f("is-invalid",e.confirmarSenha.invalid&&(e.confirmarSenha.dirty||e.confirmarSenha.touched)||e.formulario.hasError("passwordsMismatch")&&(e.confirmarSenha.dirty||e.confirmarSenha.touched)),r(),d("ngIf",e.confirmarSenha.errors&&(e.confirmarSenha.dirty||e.confirmarSenha.touched)||e.formulario.hasError("passwordsMismatch")&&(e.confirmarSenha.dirty||e.confirmarSenha.touched)),r(6),d("disabled",e.formulario.invalid||e.loading),r(),x(" ",e.loading?"Enviando...":"Enviar"," "))},dependencies:[b,M,O,N,I,y,E,w,k,F],styles:['[_nghost-%COMP%]{--nav-h: 72px;display:block;min-height:100svh;font-family:Arial,Helvetica,sans-serif;background:linear-gradient(135deg,#ffecd2,#fcb69f);color:#333}.navbar[_ngcontent-%COMP%]{width:100%;padding:12px 30px;background:#fff;display:flex;align-items:center;box-shadow:0 2px 6px #0000001a;position:fixed;top:0;left:0;z-index:1000}.nav-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.nav-logo[_ngcontent-%COMP%]{width:40px;height:auto}.brand[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:#5a3d2b}.nav-right[_ngcontent-%COMP%]{display:flex;gap:15px;margin-left:40px}.nav-btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:8px;text-decoration:none;font-weight:700;color:#fff;background:linear-gradient(to right,#ff9a76,#ff6a3d);transition:.3s}.nav-btn[_ngcontent-%COMP%]:hover{opacity:.85}.page[_ngcontent-%COMP%]{padding-top:var(--nav-h);min-height:calc(100svh - var(--nav-h));display:grid;place-items:center;padding-left:16px;padding-right:16px}.quadrado2[_ngcontent-%COMP%]{width:500px;max-width:100%;background:#fffffff2;padding:40px 32px;border-radius:18px;box-shadow:0 8px 25px #0000002e;animation:_ngcontent-%COMP%_fadeIn .8s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(14px)}to{opacity:1;transform:translateY(0)}}.quadrado2[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:20px;font-size:24px;color:#333;font-weight:700;text-align:center}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}label[_ngcontent-%COMP%]{text-align:left;font-size:14px;color:#444;font-weight:700}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{padding:10px 40px 10px 12px;border:1px solid #ccc;border-radius:10px;outline:none;font-size:14px;transition:.25s ease;background:#f9f9f9}input[type=email][_ngcontent-%COMP%]{background:#f9f9f9 url(https://cdn-icons-png.flaticon.com/512/1828/1828479.png) no-repeat 96% center;background-size:18px}input[type=password][_ngcontent-%COMP%]{background:#f9f9f9 url(https://cdn-icons-png.flaticon.com/512/3064/3064197.png) no-repeat 96% center;background-size:18px}input[_ngcontent-%COMP%]:focus{border-color:#ff914d;box-shadow:0 0 0 4px #ff914d2e;background-color:#fff}button[_ngcontent-%COMP%]{padding:14px;border:none;border-radius:10px;background:linear-gradient(45deg,#ff914d,#ff5e62);color:#fff;font-weight:700;font-size:16px;cursor:pointer;transition:.3s;position:relative;overflow:hidden}button[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:-75px;width:50px;height:100%;background:#fff6;transform:skew(-20deg);transition:.5s}button[_ngcontent-%COMP%]:hover:after{left:125%}button[_ngcontent-%COMP%]:hover{background:linear-gradient(45deg,#ff5e62,#ff914d)}.possui-login[_ngcontent-%COMP%]{margin:6px 0 4px}.possui-login[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{text-align:center;font-size:14px}.possui-login[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .text-primary[_ngcontent-%COMP%]{color:#ff5e62;font-weight:700;text-decoration:none;transition:color .2s ease,text-shadow .2s ease}.possui-login[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .text-primary[_ngcontent-%COMP%]:hover{color:#ff914d;text-decoration:underline;text-shadow:0 0 8px rgba(255,145,77,.25)}.possui-login[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus-visible, .text-primary[_ngcontent-%COMP%]:focus-visible{outline:none;box-shadow:0 0 0 3px #ff914d59;border-radius:6px}@media (max-width: 480px){[_nghost-%COMP%]{--nav-h: 64px}.quadrado2[_ngcontent-%COMP%]{padding:28px 24px;border-radius:14px}}.possui-login[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .possui-login[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:link, .possui-login[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited, .text-primary[_ngcontent-%COMP%], .text-primary[_ngcontent-%COMP%]:link, .text-primary[_ngcontent-%COMP%]:visited{color:#ff5e62!important;font-weight:700;text-decoration:none;transition:color .2s ease,text-shadow .2s ease}.possui-login[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .text-primary[_ngcontent-%COMP%]:hover{color:#ff914d!important;text-decoration:underline;text-shadow:0 0 8px rgba(255,145,77,.25)}.possui-login[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, .text-primary[_ngcontent-%COMP%]:active{color:#ff7a4d!important}']})};export{q as Cadastro};
